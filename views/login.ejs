<% include partial/header %>

<div class="col-sm-2"></div>
<div class="col-sm-8 login-form text-center">
    <div class="row">
        <div class="col-sm-4"></div>
        <div class="col-sm-8">
            <p id="message"><%= message %></p>
        </div>
    </div>
    <form method="post" class="form-horizontal">
        <div class="form-group">
            <label class="control-label col-sm-4" for="username">Username:</label>
            <div class="col-sm-8">
                <input class="form-control" type="text" name="username" id="username" />
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-4" for="password">Password:</label>
            <div class="col-sm-8">
                <input class="form-control" type="password" name="password" id="password" />
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-4 col-sm-8 text-left">
                <input class="btn btn-default" onclick="submitLoginForm()" value="Submit"/>
            </div>
        </div>
    </form>
    <p>If you don't have an account, please <a href="/register">register.</a></p>
    <script>
        function submitLoginForm(){
            $.post("login",
                {
                    username: $("#username").val(),
                    password: $("#password").val(),
                },
                function(data, status){
                    window.location.href = data.redirect;
                }).fail(function(data, status) {
                    $("#message").text(data.responseJSON.message);
                });
        }
    </script>
</div>
<div class="col-sm-2"></div>

<% include partial/footer %>